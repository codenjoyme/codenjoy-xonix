{title=Xonix codenjoy — как играть? | Игры на работе}

# Xonix codenjoy [[EN]](xonix-en.md)

Игровой demo-сервер доступен в интернете 24/7 в целях
ознакомления по [ссылке](http://codenjoy.com/codenjoy-contest).

Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала [форкнуть проект](https://github.com/codenjoyme/codenjoy).

В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.
По возникающим вопросам, пиши в [skype:alexander.baglay](skype:alexander.baglay)
или на почту [apofig@gmail.com](mailto:apofig@gmail.com).

***

# Содержание
[TOC levels=2-4]

***

## Синглплеер

Соответствует оригинальной концепции игры.

***
### События

***
#### Смерть

**Когда наступает:**

- Морской враг прикоснулся к Xonix'у, когда тот находится в море
- Морской враг прикоснулся к следу Xonix'а
- Сухопутный враг прикоснулся к Xonix'у

**Последствия:**

1. Количество жизней Xonix'а уменьшается на 1
2. Xonix появляется в начальной точке, сухопутный враг появляется в начальной точке (для того, чтобы избежать мгновенной
   смерти Xonix'а после возрождения от нахождения рядом врага)

***
#### Захват территории

**Когда наступает:**

- Xonix вышел в море и вернулся на сушу, не умерев

**Последствия:**

1. След Xonix'а превращается в сушу
2. Одна из территорий, очерченная следом и не имеющая врагов, превращается в сушу

**Особенности:**

Для соответствия оригиналу учтены некоторые не очень логичные особенности превращения моря в сушу.

1. Если след длины 1, то в сушу превращается только след, без захвата других территорий.
2. Проверяется на возможность превращения в сушу сначала левая относительно направления захода Xonix'а на сушу часть
   территории моря, затем, если она не подходит, то правая.
3. Если один из очерченных участков моря имеет площадь 0 (полностью состоит из следа), он не рассматривается к
   превращению в сушу, так как след по умолчанию превращается в сушу.
4. Проверяются только не более двух непрерывных участков моря, очерченные следом. Если Xonix очертил какую-то
   территорию, а после этого прошелся вскользь суши, то прошлая очерченная территория рассматриваться не будет.

***
#### Победа

**Когда наступает:**

- В сушу превращена определенная сенсеем часть моря, Xonix жив (1 или более жизней)

**Последствия:**

1. Игрок переносится на новый уровень

***
#### Проигрыш

**Когда наступает:**

- У Xonix'а закончились жизни

**Последствия:**

1. Игра завершается

                
***
## Мультиплеер

Виденье проекта Codenjoy, как, используя оригинальные концепции игры, веселиться в многопользовательском режиме.

***
### События

***
#### Смерть

**Когда наступает:**

- Морской враг прикоснулся к Xonix'у, когда тот находится в море
- Морской враг прикоснулся к следу Xonix'а
- Сухопутный враг прикоснулся к Xonix'у
- Враг прикоснулся к следу Xonix'а

**Последствия:**

1. Количество жизней Xonix'а уменьшается на 1
2. Xonix появляется в начальной точке


***
#### Захват территории

**Когда наступает:**

- Xonix вышел в море и вернулся на свою сушу, не умерев
- Xonix оставил след на [вражеской](#вражеская-суша) или [ничьей](#ничья-суша) суше и вернулся свою, не умерев

**Последствия:**

1. След Xonix'а превращается в сушу
2. Одна из территорий, очерченная следом и не имеющая врагов, превращается в сушу

***
#### Победа

**Когда наступает:**

- Игрок, оставшись последним выжившим на поле, захватывает определенный сенсеем процент моря

**Последствия:**

1. Игра выиграна

***
#### Проигрыш

**Когда наступает:**

- У Xonix'а закончились жизни

**Последствия:**

1. Игра завершается

***
## Элементы

### Доска

После подключения, клиент будет получать строку, содержащую в себе состояние игровой доски.  
Регулярное выражение, соответствующее этой строке: ```^board=(.*)$```  
Пример значения, которое может содержаться
в ```(.*)```: ```##########################################........o.......####........O.......####................####................####................####................####...M............####................####................####..........M.....####................####................####................####................####....M...........####................##############L###########################```  
Длина этой строки равна площади доски, соответственно, если вставить ```\n``` через каждые ```sqrt(length)``` символов,
получится читабельное изображение поля:
<pre>
####################
####################
##........o.......##
##........O.......##
##................##
##................##
##................##
##................##
##...M............##
##................##
##................##
##..........M.....##
##................##
##................##
##................##
##................##
##....M...........##
##................##
############L#######
####################
</pre>

Первый символ строки соответствует ячейке, расположенной в верхнем левом углу и имеет координату ```[0, 19]```. Первый
символ последней строки стоит в начале координат ```[0, 0]```.  
В этом примере позиция [Xonix](#Xonix)'а ```[10, 19]```.


### Xonix

Внутриигровое обозначение: ```HERO('O')```  
Главный герой игры.  
Имеет 1 или более жизней.  
Двигается по вертикально и горизонтально по [суше](#суша) и по [морю](#море).  
Двигаясь по морю, оставляет за собой [след](#след).  
Может убить себя сам, если "наступит" на свой же след.  
Выходя с моря или с чужой суши на свою сушу, превращает в свою сушу область, очерченную следом.  
**Если начал движение, остановиться может только тогда, когда выйдет на свою сушу.**


### Враг

Внутриигровое обозначение: ```HOSTILE('A')```  
Вражеский Xonix, управляемый другим игроком в мультиплеерном режиме.  
Имеет 1 или более жизней.  
Двигается по вертикально и горизонтально по [суше](#суша) и по [морю](#море).  
Двигаясь по морю, оставляет за собой [след](#след).  
Может убить себя сам, если "наступит" на свой же след.  
Выходя с моря или с чужой суши на свою сушу, превращает в свою сушу область, очерченную следом.  
**Если начал движение, остановиться может только тогда, когда на свою сушу.**


### След

Внутриигровое обозначение: ```TRACE('o')```  
След, уязвимый для морских врагов и для самого [Xonix](#Xonix)'а, оставляемый Xonix'ом на море. Очерчивая своим следом
область [моря](#море), Xonix может превратить его в [сушу](#суша).


### След врага

Внутриигровое обозначение: ```HOSTILE_TRACE('a')```  
След, оставляемый врагом, уязвимый для морских врагов, для самого врага и для [Xonix](#Xonix)'а. Очерчивая своим следом
область [моря](#море), [вражеской суши](#вражеская-суша) или [ничьей суши](#ничья-суша), Xonix может превратить его
в [сушу](#суша).


### Ничья суша

Внутриигровое обозначение: ```LAND('X')```
По этому типу суши могут передвигаться [Xonix](#Xonix), [враги](#враг) и [сухопутные враги](#сухопутный-враг).  
Xonix и враги, двигаясь по суше, оставляют на ней след, уязвимый для [сухопутных врагов](#сухопутный-враг)
и могут ее захватить.


### Суша

Внутриигровое обозначение: ```HERO_LAND('#')```  
По суше могут передвигаться [Xonix](#Xonix), [враги](#враг) (в мультиплеере) и [сухопутные враги](#Сухопутный-враг).  
Находится во владении Xonix'а.  
При движении по этой суше, Xonix не оставляет [следа](#след).  
Враги (в мультиплеере), передвигаясь по этой суше, оставляют след и могут ее захватить.


### Вражеская суша

Внутриигровое обозначение: ```HOSTILE_LAND('@')```  
По этому типу суши могут передвигаться [Xonix](#Xonix), [враги](#враг) и [сухопутные враги](#сухопутный-враг).  
Находится во владении одного из врагов.  
Враг, который владеет этой сушей, при передвижении по ней не оставляет [следа](#след).  
Xonix и другие враги, которые не владеют этой сушей, при передвижении по ней оставляют след и могут ее захватить.


### Море

Внутриигровое обозначение: ```SEA('.')```  
По морю могут передвигаться [Xonix](#Xonix) и [морские враги](#Морской-враг). Может превращаться в [сушу](#Суша)
Xonix'ом или [врагами](#враг) (в мультиплеере).


### Сухопутный враг

Внутриигровое обозначение: ```LAND_ENEMY('L')```  
Двигается по [суше](#Суша) диагонально, отскакивая от ее границ. Убивает [Xonix](#Xonix)'а прикосновением к нему.


### Морской враг

Внутриигровое обозначение: ```MARINE_ENEMY('M')```  
Двигается по морю диагонально, отскакивая от его границ. Убивает [Xonix](#Xonix)'а прикосновением к нему или к
его [следу](#след).


