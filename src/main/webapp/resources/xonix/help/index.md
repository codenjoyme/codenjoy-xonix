<meta charset="UTF-8">

## Вступление

Игровой demo-сервер доступен так же в интернете 24/7 в целях
ознакомления [http://codenjoy.com/codenjoy-contest](http://codenjoy.com/codenjoy-contest).

Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала
[форкнуть проект](https://github.com/codenjoyme/codenjoy.git).
В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.

По возникающим вопросам, пиши в [skype alexander.baglay](skype:alexander.baglay)
или на почту [apofig@gmail.com](mailto:apofig@gmail.com).

## В чем суть игры?

Требуется написать бота, который будет успешно превращать "море" в 
"сушу" избегая противников.

Возможны два режима игры[*](index.md#ask):

* одно-пользовательская - играет один игрок против охотников.
* много-пользовательская - играют несколько игроков все против всех, 
  причем им всем мешают охотники. 

Главный герой не умеет останавливаться,
если начал движение по суше или по воде. Он останавливается тогда и только тогда,
когда выбрался на сушу с моря. Дальше он может принять решение начать двигаться
в каком-нибудь направлении.

В одно-пользовательской игре выиграть можно только, если достаточный 
процент[*](index.md#ask) моря будет превращен в сушу. 

В много-пользовательской игре выигрывает тот, кто захватил сушу всех участников 
вместе с их базами.

Проиграть можно, если исчерпать все жизни[*](index.md#ask).

Количество жизней уменьшается, когда героя убивает враг, в этом случае
игра либо завершается (жизней больше не осталось), либо герой появляется 
на стартовой точке (сухопутные противники тоже оказываются на своих стартовых точках).

Герой при движении по морю оставляет за собой след, который уязвим для морских врагов.

Если герой успешно смог очертить область моря и выбраться на сушу, не наткнувшись на врагов лично
и не подставив им свой след, область, очерченная следом, превращается в сушу.

Герой может сам удариться в свой след, тогда это рассматривается, как самоубийство
(разворот в море на 180 градусов тоже в счет).

Враги двигаются по диагонали, отскакивая каждый от границ своей территории:

* сухопутные враги отскакивают от моря либо от границы карты;
* морские враги соответственно отскакивают от суши.

Игроки соревнуются каждый на своей локации за звание самого хитрого
и изворотливого героя, который сможет быстрее захватить как можно больше моря.

Очки суммируются. Побеждает игрок с большим числом очков (до условленного
времени).

[*](index.md#ask)Точное количество очков за любое действие, а так же другие
настройки на данный момент игры уточни у Сенсея.

## Подключение к серверу

Итак, игрок [регистрируется на сервере](../../../register?gameName=xonix),
указывая свой email.

Далее необходимо подключиться из кода к серверу через websocket.
[Эта подборка](https://github.com/codenjoyme/codenjoy-clients.git)
клиентов для разных языков программирования тебе поможет в твоей игре.
Как запустить клиент смотри в корне проекта в файле README.md.

Если ты не можешь найти свой язык - придется написать свой клиент
(а после пошарить с нами на почту [apofig@gmail.com](mailto:apofig@gmail.com))

Адрес для подключения к игре на сервере выглядит так (ты можешь скопировать его
из игровой комнаты):

`https://[server]/codenjoy-contest/board/player/[user]?code=[code]`

Тут `[server]` - домен или ip-адрес игрового сервера, `[user]` - id игрока, a `[code]` -
твой security token. Убедись что код хранится в тайне, иначе любой участник
сможет играть от твоего имени.

В коде твоего клиента тебе нужно найти похожую строчку и заменить её твоим URL -
тем самым, ты задаёшь логин/пароль для доступа к серверу.
Затем запусти твой клиент и убедись, что сервер получает команды твоего клиента.
После этого можно приступать к работе над логикой бота.

## Формат сообщений

После подключения клиент будет регулярно (каждую секунду) получать строку
символов с закодированным состоянием поля. Формат таков:

`^board=(.*)$`

C помощью этого regexp можно выкусить строку доски.

## Пример поля

Вот пример строки от сервера:

<pre>board=##########################################........o.......####........O.......####................####................####................####................####...M............####................####................####..........M.....####................####................####................####................####....M...........####................##############L#######
####################</pre>

Длинна строки равна площади поля `N*N`. Если вставить символ
переноса строки каждые `N=sqrt(length(string))` символов, то
получится читабельное изображение поля:

<pre>####################
####################
##........o.......##
##........O.......##
##................##
##................##
##................##
##................##
##...M............##
##................##
##................##
##..........M.....##
##................##
##................##
##................##
##................##
##....M...........##
##................##
############L#######
####################</pre>

Первый символ строки соответствует ячейке
расположенной в левом верхнем углу и имеет координату `[0, 19]`.
Координата `[0, 0]` соответствует левому нижнему углу.
В этом примере - позиция героя (символ `O`) — `[10, 16]`.

## Расшифровка символов

Расшифровку символов ты можешь [найти тут](elements.md).

## Как играть?

Игра пошаговая, каждую секунду сервер посылает твоему
клиенту (боту) состояние обновленного поля на текущий
момент и ожидает в ответ команды герою.
За следующую секунду игрок должен успеть дать команду герою,
если не успел - герой, к примеру, может и не повернуть.

## Команды управления

Команд несколько:

* `UP`, `DOWN`, `LEFT`, `RIGHT` – приводят к
  движению героя в заданном направлении или повороту
  в соответствующую сторону.

## Настройки

Параметры будут меняться[*](index.md#ask) по ходу игры.

## Кейзы

## <a id="ask"></a> Спроси Сенсея

Параметры могут изменяться по ходу игры. Настройки текущей игры
ты сможешь всегда [подглядеть тут](/codenjoy-contest/rest/settings/player).
Пожалуйста, спроси у Сенсея как интерпретировать эти данные. Ты можешь найти Сенсея
в чате, который подготовили организаторы для обсуждения вопросов.

## Подсказки

Первостепенная задача – написать websocket клиента, который подключится
к серверу. Затем заставить героя на поле слушаться команд.
Таким образом, игрок подготовится к основной игре.
Основная цель – вести осмысленную игру и победить.

Если ты не знаешь с чего начать, попробуй реализовать следующие алгоритмы:

* Перейти в случайную пустую соседнюю ячейку.
* Попытаться не попасться охотникам.
* Захватить как можно больший участок поля.

## Клиент и API

Организаторы предоставляют игрокам подготовленные клиенты в исходном
коде на нескольких языках. Каждый из этих клиентов уже умеет связываться
с сервером, принимать и разбирать сообщение от сервера (обычно это называется board)
и отправлять серверу команды.

Слишком много форы клиентский код не дает играющим, поскольку в этом коде
еще надо разобраться, но там реализована логика общения с сервером +
некоторое высокоуровневое API для работы с доской (что уже приятно).

Все языки так или иначе имеют похожий набор методов:

* `Solver`
  Пустой класс с одним методом — ты должен(должна) наполнить его умной логикой.
* `Direcion`
  Возможные направления движения для этой игры.
* `Point`
  `x`, `y` координаты.
* `Element`
  Тип элемента на доске.
* `Board`
  Содержит логику для удобного поиска и манипуляции элементами на поле.
  Ты можешь найти следующие методы в Board классе:
* `int boardSize();`
  Размер доски.
* `boolean isAt(Point point, Element element);`
  Находится ли в позиции point заданный элемент?
* `boolean isAt(Point point, Collection<Element>elements);`
  Находится ли в позиции point что-нибудь из заданного набора?
* `boolean isNear(Point point, Element element);`
  Есть ли вокруг клеточки с координатой point заданный элемент?
* `int countNear(Point point, Element element);`
  Сколько элементов заданного типа есть вокруг клетки с point?
* `Element getAt(Point point);`
  Элемент в текущей клетке.
* и так далее...

## Как провести такой же ивент самостоятельно?

Перед тобой opensource проект. Для реализации своей новой игры, модификации этой игры,
любой другой модификации сервера или исправления найденной ошибки
[форкни проект](https://github.com/codenjoyme/codenjoy.git).
Все инструкции ты найдешь в Readme.md файлах - они подскажут, что делать дальше.

Если у тебя есть вопросы - прошу, задавай их мне
в [скайпе alexander.baglay](skype:alexander.baglay)
или по почте [apofig@gmail.com](mailto:apofig@gmail.com).

Удачной игры и пусть победит сильнейший! 