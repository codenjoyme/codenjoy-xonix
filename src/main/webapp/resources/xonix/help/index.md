<header class="entry-header">
<h1 class="entry-title">Xonix codenjoy — как играть?</h1>
</header>
<div class="entry-content">
<div class="page-restrict-output">
<p>
Игровой demo-сервер доступен так же в интернете 24/7
в целях ознакомления <a href="http://codenjoy.com/codenjoy-contest">
http://codenjoy.com/codenjoy-contest</a>
</p>

<p>
Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала
<a href="https://github.com/codenjoyme/codenjoy">форкнуть проект</a>.
В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.
</p>

<p>
По возникающим вопросам, пиши в <a href="skype:alexander.baglay">skype:alexander.baglay</a>
или на почту <a href="mailto:apofig@gmail.com">apofig@gmail.com</a>
</p>

<h2>В чем суть игры?</h2>

<p>
Требуется написать бота, который будет успешно превращать "море" в "сушу" избегая противников.
</p>
<p>
Главный герой (назовем его Xonix) не умеет останавливаться,
если начал движение по суше или по воде. Он останавливается тогда и только тогда,
когда выбрался на сушу с моря. Дальше он может принять решение начать двигаться
в каком-нибудь направлении.
</p>
<p>
Один игрок на поле. Выиграть можно только тогда, когда достаточный процент моря
(задается сенсеем в настройках) будет превращен в сушу.
Проиграть можно, если исчерпать все жизни (количество задается сенсеем в настройках).
Количество жизней уменьшается, когда Xonix'а убивает враг, в этом случае
игра либо завершается (жизней больше не осталось), либо Xonix появляется на стартовой точке
(сухопутные противники тоже оказываются на своих стартовых точках).
</p>
<p>
Xonix при движении по морю оставляет за собой след, который уязвим для морских врагов.
Если Xonix успешно смог очертить область моря и выбраться на сушу, не наткнувшись на врагов лично
и не подставив им свой след, область, очерченная следом, превращается в сушу.
Xonix может сам удариться в свой след, тогда это рассматривается, как самоубийство
(разворот в море на 180 градусов тоже в счет)
Враги двигаются по диагонали, отскакивая каждый от границ своей территории:
сухопутные враги отскакивают от моря либо от границы карты,
морские враги соответственно отскакивают от суши.
</p>
<p>
Игроки соревнуются каждый на своей локации за звание самого хитрого
и изворотливого Xonix'а, который сможет быстрее захватить как можно больше моря.
</p>

<p>
Итак, игрок <a href="/codenjoy-contest/register?gameName=sample">
регистрируется на сервере</a>, указывая свой email.
Далее необходимо подключиться <a href="../../../resources/sample/user/clients.zip">из кода</a>
к серверу через вебсокет. Это Maven проект и подойдет
он для игры на JVM языках. Как его запустить смотри
в корне проекта в файле README.txt
</p>
<p>
Для других языков придется написать свой клиент
(а после пошарить с нами на почту: apofig@gmail.com)
</p>
<p>
Адрес для подключения к игре на сервере http://codenjoy.com:
</p>
<pre>ws://codenjoy.com:80/codenjoy-contest/ws?user=[user]&code=[code]</pre>
<p>
Адрес для подключения к игре на сервере, развернутом в локальной сети:
</p>
<pre>ws://[server]:8080/codenjoy-contest/ws?user=[user]&code=[code]</pre>
<p>
Тут [server] - ip-адрес сервера, [user] - id игрока, a [code]
- твой security token, его ты можешь получить из адресной
строки браузера после регистрации/логина
</p>
<p>
После подключения клиент будет регулярно
(каждую секунду) получать строку
символов — с закодированным состоянием поля. Формат таков:
</p>

<pre>^board=(.*)$</pre>
<p>
С помощью этого регулярного выражения можно извлечь из
полученной строки доску. Вот пример строки от сервера:
</p>
<pre>Board=##########################################........o.......####........O.......####................####................####................####................####...M............####................####................####..........M.....####................####................####................####................####....M...........####................##############L#######
####################</pre>
<p>
Длина строки равна площади поля. Если вставить символ переноса
строки каждые sqrt(length(string)) символов, то получится читабельное
изображение поля:
</p>
<pre>
####################
####################
##........o.......##
##........O.......##
##................##
##................##
##................##
##................##
##...M............##
##................##
##................##
##..........M.....##
##................##
##................##
##................##
##................##
##....M...........##
##................##
############L#######
####################
</pre>

<p>
Первый символ строки соответствует ячейке
расположенной в левом верхнем углу и имеет координату
[0, 19]. Первый символ последней строки стоит
в начале координат [0, 0]. В этом примере —
позиция Xonix'a (символ O) — [10, 19].
</p>

</br>

<p>
<b><u>Расшифровка символов</u></b>
</p>

<p>
Море, где живут морские враги. Море нужно делать сушей!
</p>
<pre>
SEA('.')</pre>

<p>
Суша, по которой можно передвигаться Xonix'у и наземным врагам
</p>
<pre>
LAND('#')</pre>

<p>
Наш Xonix
</p>
<pre>
XONIX('O')</pre>

<p>
След, который оставляет Xonix, двигаясь по морю
</p>
<pre>
TRACE('o')</pre>
<p>
Морской противник
</p>
<pre>
MARINE_ENEMY('M')</pre>
<p>
Сухопутный противник
</p>
<pre>
LAND_ENEMY('L')</pre>

<p>
Игра пошаговая, каждую секунду сервер посылает твоему
клиенту (боту) состояние обновленного поля на текущий
момент и ожидает в ответ команды Xonix'у.
За следующую секунду игрок должен успеть дать команду Xonix'у,
если не успел - Xonix, к примеру, может и не повернуть.
</p>
<p>
Команд несколько: UP, DOWN, LEFT, RIGHT – приводят к
движению Xonix'а в заданном направлении или повороту
в соответствующую сторону.
</p>
<p>
Первоочередная задача – написать websocket клиента,
который подключится к серверу. Затем заставить героя
слушаться команды. Таким образом, игрок подготовится
к основной игре. Основная задача – вести осмысленную
игру и победить.
</p>
</div>
</div>