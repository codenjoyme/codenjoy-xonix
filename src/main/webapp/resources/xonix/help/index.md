<meta charset="UTF-8">

## Вступление

Игровой demo-сервер доступен так же в интернете 24/7 в целях
ознакомления [http://codenjoy.com/codenjoy-contest](http://codenjoy.com/codenjoy-contest).

Игра с открытым исходным кодом. Для реализации своей игры, исправления
ошибок в текущей и внесения других правок необходимо для начала
[форкнуть проект](https://github.com/codenjoyme/codenjoy.git).
В корне репозитория есть описание в файле Readme.md - там описано, что делать дальше.

По возникающим вопросам, пиши в [skype alexander.baglay](skype:alexander.baglay)
или на почту [apofig@gmail.com](mailto:apofig@gmail.com).

## В чем суть игры?

Требуется написать бота, который будет успешно превращать "море" в 
"сушу" избегая противников.

Главный герой не умеет останавливаться,
если начал движение по суше или по воде. Он останавливается тогда и только тогда,
когда выбрался на сушу с моря. Дальше он может принять решение начать двигаться
в каком-нибудь направлении.

Один игрок на поле. Выиграть можно только тогда, когда достаточный процент моря
(задается сенсеем в настройках) будет превращен в сушу.
Проиграть можно, если исчерпать все жизни (количество задается сенсеем в настройках).
Количество жизней уменьшается, когда героя убивает враг, в этом случае
игра либо завершается (жизней больше не осталось), либо герой появляется 
на стартовой точке (сухопутные противники тоже оказываются на своих стартовых точках).

Герой при движении по морю оставляет за собой след, который уязвим для морских врагов.
Если герой успешно смог очертить область моря и выбраться на сушу, не наткнувшись на врагов лично
и не подставив им свой след, область, очерченная следом, превращается в сушу.
герой  может сам удариться в свой след, тогда это рассматривается, как самоубийство
(разворот в море на 180 градусов тоже в счет)
Враги двигаются по диагонали, отскакивая каждый от границ своей территории:
сухопутные враги отскакивают от моря либо от границы карты,
морские враги соответственно отскакивают от суши.

Игроки соревнуются каждый на своей локации за звание самого хитрого
и изворотливого героя, который сможет быстрее захватить как можно больше моря.

## Подключение к серверу

Итак, игрок [регистрируется на сервере](../../../register?gameName=xonix),
указывая свой email.

Далее необходимо подключиться из кода к серверу через websocket.
[Эта подборка](https://github.com/codenjoyme/codenjoy-clients.git)
клиентов для разных языков программирования тебе поможет в твоей игре.
Как запустить клиент смотри в корне проекта в файле README.md.

Если ты не можешь найти свой язык - придется написать свой клиент
(а после пошарить с нами на почту [apofig@gmail.com](mailto:apofig@gmail.com))

Адрес для подключения к игре на сервере выглядит так (ты можешь скопировать его
из игровой комнаты):

`https://[server]/codenjoy-contest/board/player/[user]?code=[code]`

Тут `[server]` - домен или ip-адрес игрового сервера, `[user]` - id игрока, a `[code]` -
твой security token. Убедись что код хранится в тайне, иначе любой участник
сможет играть от твоего имени.

В коде твоего клиента тебе нужно найти похожую строчку и заменить её твоим URL -
тем самым, ты задаёшь логин/пароль для доступа к серверу.
Затем запусти твой клиент и убедись, что сервер получает команды твоего клиента.
После этого можно приступать к работе над логикой бота.

После подключения клиент будет регулярно
(каждую секунду) получать строку
символов с закодированным состоянием поля. Формат таков

`^board=(.*)$`

С помощью этого регулярного выражения можно извлечь из
полученной строки доску. Вот пример строки от сервера:

<pre>Board=##########################################........o.......####........O.......####................####................####................####................####...M............####................####................####..........M.....####................####................####................####................####....M...........####................##############L#######
####################</pre>

Длина строки равна площади поля. Если вставить символ переноса
строки каждые `sqrt(length(string))` символов, то получится читабельное
изображение поля:

<pre>####################
####################
##........o.......##
##........O.......##
##................##
##................##
##................##
##................##
##...M............##
##................##
##................##
##..........M.....##
##................##
##................##
##................##
##................##
##....M...........##
##................##
############L#######
####################</pre>

Первый символ строки соответствует ячейке
расположенной в левом верхнем углу и имеет координату
[0, 19]. Первый символ последней строки стоит
в начале координат [0, 0]. В этом примере —
позиция героя (символ O) — [10, 19].

## Расшифровка символов

Расшифровку символов ты можешь [найти тут](elements.md).

## Как играть?

Игра пошаговая, каждую секунду сервер посылает твоему
клиенту (боту) состояние обновленного поля на текущий
момент и ожидает в ответ команды герою.
За следующую секунду игрок должен успеть дать команду герою,
если не успел - герой, к примеру, может и не повернуть.

## Команды управления

Команд несколько:

* `UP`, `DOWN`, `LEFT`, `RIGHT` – приводят к
  движению героя в заданном направлении или повороту
  в соответствующую сторону.

Первостепенная задача – написать websocket клиента,
который подключится к серверу. Затем заставить героя
слушаться команды. Таким образом, игрок подготовится
к основной игре. Основная задача – вести осмысленную
игру и победить.